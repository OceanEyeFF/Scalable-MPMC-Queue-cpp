# Phase 8 StarterPrompt: æ–‡æ¡£è¡¥å…¨å’Œä½¿ç”¨è¯´æ˜

> **ä»»åŠ¡ä»£å·**: LSCQ-Phase8-Documentation
> **é¢„è®¡å·¥æœŸ**: 1-2å‘¨
> **å‰ç½®ä¾èµ–**: Phase 7 å®Œæˆï¼ˆæ€§èƒ½æµ‹è¯•å®Œæˆï¼‰
> **åç»­é˜¶æ®µ**: é¡¹ç›®å‘å¸ƒï¼ˆv1.0.0ï¼‰

---

## 1. ä»»åŠ¡æ¦‚è¿°

### 1.1 æ ¸å¿ƒç›®æ ‡
å®Œå–„é¡¹ç›®çš„**å®Œæ•´æ–‡æ¡£ä½“ç³»**ï¼Œç¡®ä¿ç”¨æˆ·å¯ä»¥è½»æ¾ä¸Šæ‰‹å’Œä½¿ç”¨ï¼š
1. **README.md** - é¡¹ç›®ä¸»æ–‡æ¡£ï¼ŒåŒ…å«å¿«é€Ÿå¼€å§‹ã€ç‰¹æ€§ä»‹ç»
2. **ä½¿ç”¨æ•™ç¨‹** - è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—å’Œæœ€ä½³å®è·µ
3. **APIæ–‡æ¡£** - å®Œæ•´çš„Doxygen APIå‚è€ƒ
4. **ç¤ºä¾‹ä»£ç ** - å¤šä¸ªå®ç”¨ç¤ºä¾‹å·¥ç¨‹
5. **æ•…éšœæ’æŸ¥** - å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
6. **è´¡çŒ®æŒ‡å—** - å¼€æºè´¡çŒ®æµç¨‹

### 1.2 æŠ€æœ¯æŒ‘æˆ˜
- **æ–‡æ¡£è´¨é‡**: æ¸…æ™°ã€å‡†ç¡®ã€æ˜“æ‡‚
- **ä»£ç ç¤ºä¾‹**: å®ç”¨ã€å¯è¿è¡Œã€æœ‰æ³¨é‡Š
- **ç”¨æˆ·ä½“éªŒ**: é™ä½å­¦ä¹ æ›²çº¿
- **å›½é™…åŒ–**: ä¸­è‹±æ–‡åŒè¯­æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰

### 1.3 ä»»åŠ¡ä»·å€¼
- âœ… æå‡é¡¹ç›®å¯ç”¨æ€§
- âœ… å¸å¼•å¼€æºç¤¾åŒºè´¡çŒ®
- âœ… é™ä½ç”¨æˆ·å­¦ä¹ æˆæœ¬
- âœ… ä¸ºé¡¹ç›®å‘å¸ƒåšå‡†å¤‡

---

## 2. ä»»åŠ¡è¾¹ç•Œ

### 2.1 In Scope (æœ¬é˜¶æ®µå¿…é¡»å®Œæˆ)
- [x] **README.md** å®Œå–„
  - é¡¹ç›®ç®€ä»‹å’Œç‰¹æ€§
  - å¿«é€Ÿå¼€å§‹ï¼ˆQuick Startï¼‰
  - å®‰è£…æŒ‡å—
  - æ€§èƒ½æ•°æ®å±•ç¤º
  - Licenseå’Œè´¡çŒ®é“¾æ¥
- [x] **ä½¿ç”¨æ•™ç¨‹** (`docs/Tutorial.md`)
  - åŸºç¡€ç”¨æ³•
  - é«˜çº§ç‰¹æ€§
  - æœ€ä½³å®è·µ
  - æ€§èƒ½è°ƒä¼˜
- [x] **APIæ–‡æ¡£** (Doxygen)
  - æ‰€æœ‰å…¬å¼€ç±»å’Œæ–¹æ³•çš„æ³¨é‡Š
  - ç”ŸæˆHTMLæ–‡æ¡£
  - å‘å¸ƒåˆ°GitHub Pagesï¼ˆå¯é€‰ï¼‰
- [x] **ç¤ºä¾‹ä»£ç ** (`examples/`)
  - åŸºç¡€ç¤ºä¾‹ï¼ˆsimple_usage.cppï¼‰
  - ä»»åŠ¡é˜Ÿåˆ—ç¤ºä¾‹ï¼ˆtask_queue.cppï¼‰
  - ç”Ÿäº§è€…-æ¶ˆè´¹è€…ç¤ºä¾‹ï¼ˆproducer_consumer.cppï¼‰
  - æ€§èƒ½å¯¹æ¯”ç¤ºä¾‹ï¼ˆbenchmark_demo.cppï¼‰
- [x] **æ•…éšœæ’æŸ¥æŒ‡å—** (`docs/Troubleshooting.md`)
- [x] **è´¡çŒ®æŒ‡å—** (`CONTRIBUTING.md`)
- [x] **è¡Œä¸ºå‡†åˆ™** (`CODE_OF_CONDUCT.md`)
- [x] **Licenseæ–‡ä»¶** (`LICENSE`)

### 2.2 Out of Scope (æœ¬é˜¶æ®µä¸æ¶‰åŠ)
- âŒ æ–°åŠŸèƒ½å¼€å‘
- âŒ Bugä¿®å¤ï¼ˆé™¤éå½±å“ç¤ºä¾‹ä»£ç ï¼‰
- âŒ æ€§èƒ½ä¼˜åŒ–ï¼ˆPhase 6-7å·²å®Œæˆï¼‰

---

## 3. å‰ç½®æ¡ä»¶ä¸è¾“å…¥

### 3.1 å‰ç½®ä¾èµ–
- âœ… Phase 7å·²é€šè¿‡æ‰€æœ‰éªŒæ”¶Gate
- âœ… `docs/Phase7-äº¤æ¥æ–‡æ¡£.md` å·²åˆ›å»º
- âœ… æ€§èƒ½æŠ¥å‘Šå’Œå›¾è¡¨å·²ç”Ÿæˆ

### 3.2 å¿…è¯»æ–‡æ¡£ï¼ˆæŒ‰é¡ºåºï¼‰
1. **`docs/Phase7-äº¤æ¥æ–‡æ¡£.md`** - æ€§èƒ½æ•°æ®å’Œå¯¹æ¯”åˆ†æ
2. **`docs/Phase7-æ€§èƒ½æŠ¥å‘Š.md`** - å®Œæ•´æ€§èƒ½æŠ¥å‘Š
3. **`docs/01-æŠ€æœ¯å®ç°æ€è·¯.md`** - æŠ€æœ¯ç»†èŠ‚ï¼ˆä¾›APIæ–‡æ¡£å‚è€ƒï¼‰
4. **ä¼˜ç§€å¼€æºé¡¹ç›®çš„æ–‡æ¡£** - ä¾‹å¦‚Follyã€Boostçš„README

### 3.3 å…³é”®ä»£ç å¤ç”¨ï¼ˆæ¥è‡ªPhase 7ï¼‰
- æ€§èƒ½æ•°æ®è¡¨æ ¼ï¼ˆåµŒå…¥READMEï¼‰
- æ€§èƒ½å¯¹æ¯”å›¾è¡¨ï¼ˆåµŒå…¥ä½¿ç”¨æŒ‡å—ï¼‰
- Benchmarkç¤ºä¾‹ä»£ç 

### 3.4 ç¯å¢ƒè¦æ±‚
- Phase 7æ„å»ºç¯å¢ƒ
- Doxygen 1.9+
- Markdownç¼–è¾‘å™¨
- ï¼ˆå¯é€‰ï¼‰Python + matplotlibï¼ˆç”Ÿæˆæ›´å¤šå›¾è¡¨ï¼‰

---

## 4. è¯¦ç»†ä»»åŠ¡æ¸…å•

### 4.1 README.md å®Œå–„ (Day 1-2)

#### 4.1.1 é¡¹ç›®ä¸»æ–‡æ¡£ç»“æ„

**åˆ›å»º/ä¿®æ”¹ `README.md`**:

```markdown
# LSCQ - Scalable Lock-Free MPMC Queue for C++

[![CI](https://github.com/yourname/lscq-cpp/workflows/CI/badge.svg)](https://github.com/yourname/lscq-cpp/actions)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![C++17](https://img.shields.io/badge/C++-17-blue.svg)](https://en.cppreference.com/w/cpp/17)

é«˜æ€§èƒ½ã€æ— é”ã€å¤šç”Ÿäº§è€…å¤šæ¶ˆè´¹è€…ï¼ˆMPMCï¼‰é˜Ÿåˆ—ï¼ŒåŸºäºå­¦æœ¯è®ºæ–‡å®ç°ï¼š

> Ruslan Nikolaev. "A Scalable, Portable, and Memory-Efficient Lock-Free FIFO Queue"
> PPoPP 2019

## âœ¨ ç‰¹æ€§

- **ğŸš€ é«˜æ€§èƒ½**: 16æ ¸è¾¾åˆ° 52+ Mops/secï¼Œæ¯”ä¼ ç»ŸMSQueueå¿«3å€+
- **ğŸ”’ æ— é”**: çœŸæ­£çš„lock-freeç®—æ³•ï¼Œæ— äº’æ–¥é”é˜»å¡
- **ğŸ‘¥ MPMC**: æ”¯æŒå¤šç”Ÿäº§è€…å¤šæ¶ˆè´¹è€…å¹¶å‘
- **ğŸ“¦ æ— ç•Œæ‰©å±•**: LSCQå˜ä½“æ”¯æŒåŠ¨æ€å®¹é‡æ‰©å±•
- **ğŸ§  å†…å­˜é«˜æ•ˆ**: Epoch-Based Reclamationï¼Œæ— GCä¾èµ–
- **ğŸŒ è·¨å¹³å°**: æ”¯æŒx86-64ã€ARM64ã€PowerPC

## ğŸ“Š æ€§èƒ½æ•°æ®

### ååé‡å¯¹æ¯”ï¼ˆPairåœºæ™¯ï¼‰

![Performance](docs/Phase7-æ€§èƒ½å¯¹æ¯”å›¾.png)

| Queue Type | 1 Thread | 8 Threads | 16 Threads | vs MSQueue |
|------------|----------|-----------|------------|------------|
| **SCQ**    | 8.2 Mops/sec | 42.5 Mops/sec | **52.1 Mops/sec** | **+189%** |
| **LSCQ**   | 7.5 Mops/sec | 38.2 Mops/sec | 45.8 Mops/sec | +154% |
| MSQueue    | 6.1 Mops/sec | 15.8 Mops/sec | 18.0 Mops/sec | - |
| Mutex Queue| 5.2 Mops/sec | 8.3 Mops/sec  | 9.1 Mops/sec  | -50% |

*æµ‹è¯•ç¯å¢ƒ: Intel Xeon, Clang++ 14, -O3 -march=native*

è¯¦ç»†æ€§èƒ½æŠ¥å‘Š: [Phase7-æ€§èƒ½æŠ¥å‘Š.md](docs/Phase7-æ€§èƒ½æŠ¥å‘Š.md)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

**è¦æ±‚**:
- C++17 ç¼–è¯‘å™¨ï¼ˆClang++ 14+ æˆ– GCC 10+ï¼‰
- CMake 3.20+
- Ninjaï¼ˆæ¨èï¼‰

**å…‹éš†å¹¶ç¼–è¯‘**:
```bash
git clone https://github.com/yourname/lscq-cpp.git
cd lscq-cpp

# é…ç½®Releaseæ„å»º
cmake --preset release-performance

# ç¼–è¯‘
cmake --build build/release-perf

# è¿è¡Œæµ‹è¯•
ctest --test-dir build/release-perf
```

### åŸºç¡€ç”¨æ³•

**æœ‰ç•Œé˜Ÿåˆ—ï¼ˆSCQï¼‰**:
```cpp
#include "lscq/scq.hpp"

lscq::SCQ<uint64_t> queue;

// ç”Ÿäº§è€…
queue.enqueue(42);

// æ¶ˆè´¹è€…
uint64_t value = queue.dequeue();
if (value != lscq::SCQ<uint64_t>::EMPTY_VALUE) {
    std::cout << "Got: " << value << "\n";
}
```

**æ— ç•Œé˜Ÿåˆ—ï¼ˆLSCQï¼‰**:
```cpp
#include "lscq/lscq.hpp"

lscq::LSCQ<int> queue;

// ç”Ÿäº§è€…
int value = 42;
queue.enqueue(&value);

// æ¶ˆè´¹è€…
int* ptr = queue.dequeue();
if (ptr != nullptr) {
    std::cout << "Got: " << *ptr << "\n";
}
```

æ›´å¤šç¤ºä¾‹: [examples/](examples/)

## ğŸ“– æ–‡æ¡£

- **[ä½¿ç”¨æ•™ç¨‹](docs/Tutorial.md)** - è¯¦ç»†ä½¿ç”¨æŒ‡å—
- **[APIæ–‡æ¡£](https://yourname.github.io/lscq-cpp/)** - Doxygenç”Ÿæˆçš„APIå‚è€ƒ
- **[æ€§èƒ½æŠ¥å‘Š](docs/Phase7-æ€§èƒ½æŠ¥å‘Š.md)** - å®Œæ•´æ€§èƒ½æµ‹è¯•æ•°æ®
- **[æŠ€æœ¯å®ç°](docs/01-æŠ€æœ¯å®ç°æ€è·¯.md)** - ç®—æ³•åŸç†å’Œè®¾è®¡
- **[æ•…éšœæ’æŸ¥](docs/Troubleshooting.md)** - å¸¸è§é—®é¢˜è§£å†³

## ğŸ§© é˜Ÿåˆ—ç±»å‹é€‰æ‹©

| é˜Ÿåˆ—ç±»å‹ | å®¹é‡ | å­˜å‚¨ | æ€§èƒ½ | é€‚ç”¨åœºæ™¯ |
|---------|------|------|------|---------|
| **NCQ** | æœ‰ç•Œ | ç´¢å¼• | Baseline | æ€§èƒ½å¯¹æ¯”åŸºå‡† |
| **SCQ** | æœ‰ç•Œ | ç´¢å¼• | â­â­â­â­â­ | é«˜æ€§èƒ½ã€å·²çŸ¥å®¹é‡ä¸Šé™ |
| **SCQP** | æœ‰ç•Œ | æŒ‡é’ˆ | â­â­â­â­ | å¯¹è±¡é˜Ÿåˆ—ã€å·²çŸ¥å®¹é‡ä¸Šé™ |
| **LSCQ** | æ— ç•Œ | æŒ‡é’ˆ | â­â­â­â­ | å¯¹è±¡é˜Ÿåˆ—ã€å®¹é‡åŠ¨æ€æ‰©å±• |

**æ¨è**:
- **é«˜æ€§èƒ½å›ºå®šå®¹é‡**: ä½¿ç”¨ `SCQ`
- **å¯¹è±¡é˜Ÿåˆ—æ— ç•Œæ‰©å±•**: ä½¿ç”¨ `LSCQ`
- **å­¦ä¹ å’Œå¯¹æ¯”**: ä» `NCQ` å¼€å§‹

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
lscq-cpp/
â”œâ”€â”€ include/lscq/           # å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ ncq.hpp            # NCQ (Baseline)
â”‚   â”œâ”€â”€ scq.hpp            # SCQ (é«˜æ€§èƒ½æœ‰ç•Œ)
â”‚   â”œâ”€â”€ scqp.hpp           # SCQP (æŒ‡é’ˆæœ‰ç•Œ)
â”‚   â”œâ”€â”€ lscq.hpp           # LSCQ (æ— ç•Œ)
â”‚   â”œâ”€â”€ cas2.hpp           # CAS2æŠ½è±¡å±‚
â”‚   â””â”€â”€ detail/
â”‚       â””â”€â”€ epoch.hpp      # EBRå†…å­˜å›æ”¶
â”œâ”€â”€ src/                   # æºæ–‡ä»¶
â”œâ”€â”€ tests/                 # å•å…ƒæµ‹è¯•
â”œâ”€â”€ benchmarks/            # æ€§èƒ½æµ‹è¯•
â”œâ”€â”€ examples/              # ç¤ºä¾‹ä»£ç 
â””â”€â”€ docs/                  # æ–‡æ¡£
```

## ğŸ§ª æµ‹è¯•ä¸Benchmark

**è¿è¡Œæµ‹è¯•**:
```bash
# å•å…ƒæµ‹è¯•
ctest --test-dir build/release-perf

# å¸¦Sanitizersçš„æµ‹è¯•
cmake --preset windows-clang-debug -DLSCQ_ENABLE_SANITIZERS=ON
cmake --build build/debug
./build/debug/tests/lscq_tests
```

**è¿è¡ŒBenchmark**:
```bash
./build/release-perf/benchmarks/comprehensive_benchmark \
    --benchmark_min_time=5s
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·é˜…è¯» [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è´¡çŒ®æµç¨‹ã€‚

**è´¡çŒ®æ–¹å¼**:
- ğŸ› æŠ¥å‘ŠBug: [GitHub Issues](https://github.com/yourname/lscq-cpp/issues)
- ğŸ’¡ åŠŸèƒ½å»ºè®®: [GitHub Discussions](https://github.com/yourname/lscq-cpp/discussions)
- ğŸ”§ æäº¤PR: Fork â†’ å¼€å‘ â†’ æµ‹è¯• â†’ PR

## ğŸ“„ License

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE)ã€‚

## ğŸ™ è‡´è°¢

- åŸºäºRuslan Nikolaevçš„è®ºæ–‡å®ç°
- æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…

## ğŸ“§ è”ç³»æ–¹å¼

- **ä½œè€…**: [Your Name]
- **Email**: your.email@example.com
- **GitHub**: [@yourname](https://github.com/yourname)

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿Staræ”¯æŒï¼
```

**éªŒæ”¶ç‚¹**: READMEæ¸…æ™°ã€å®Œæ•´ã€æœ‰å¸å¼•åŠ›

---

### 4.2 ä½¿ç”¨æ•™ç¨‹ (Day 3-4)

#### 4.2.1 åˆ›å»º `docs/Tutorial.md`

```markdown
# LSCQ ä½¿ç”¨æ•™ç¨‹

æœ¬æ•™ç¨‹å°†å¼•å¯¼ä½ ä»é›¶å¼€å§‹ä½¿ç”¨LSCQé˜Ÿåˆ—åº“ã€‚

## ç›®å½•

1. [åŸºç¡€æ¦‚å¿µ](#åŸºç¡€æ¦‚å¿µ)
2. [é€‰æ‹©åˆé€‚çš„é˜Ÿåˆ—](#é€‰æ‹©åˆé€‚çš„é˜Ÿåˆ—)
3. [åŸºç¡€ç”¨æ³•](#åŸºç¡€ç”¨æ³•)
4. [é«˜çº§ç‰¹æ€§](#é«˜çº§ç‰¹æ€§)
5. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
6. [æ€§èƒ½è°ƒä¼˜](#æ€§èƒ½è°ƒä¼˜)

---

## åŸºç¡€æ¦‚å¿µ

### ä»€ä¹ˆæ˜¯MPMCé˜Ÿåˆ—ï¼Ÿ

MPMCï¼ˆMulti-Producer Multi-Consumerï¼‰é˜Ÿåˆ—å…è®¸ï¼š
- **å¤šä¸ªç”Ÿäº§è€…çº¿ç¨‹**åŒæ—¶å…¥é˜Ÿå…ƒç´ 
- **å¤šä¸ªæ¶ˆè´¹è€…çº¿ç¨‹**åŒæ—¶å‡ºé˜Ÿå…ƒç´ 
- **æ— é”è®¾è®¡**ï¼Œæ— éœ€äº’æ–¥é”

### LSCQçš„ç‰¹ç‚¹

- **Lock-free**: ä½¿ç”¨CASåŸå­æ“ä½œï¼Œæ— é˜»å¡
- **Scalable**: çº¿ç¨‹æ•°å¢åŠ æ—¶æ€§èƒ½çº¿æ€§å¢é•¿
- **Memory-efficient**: ä½¿ç”¨EBRå›æ”¶å†…å­˜

---

## é€‰æ‹©åˆé€‚çš„é˜Ÿåˆ—

### å†³ç­–æ ‘

```
éœ€è¦æ— ç•Œé˜Ÿåˆ—ï¼Ÿ
â”œâ”€ æ˜¯ â†’ LSCQ
â””â”€ å¦ â†’ éœ€è¦å­˜å‚¨æŒ‡é’ˆï¼Ÿ
    â”œâ”€ æ˜¯ â†’ SCQP
    â””â”€ å¦ â†’ SCQ
```

### è¯¦ç»†å¯¹æ¯”

| éœ€æ±‚ | æ¨èé˜Ÿåˆ— | åŸå›  |
|------|---------|------|
| ä»»åŠ¡é˜Ÿåˆ—ï¼ˆå®¹é‡æœªçŸ¥ï¼‰ | LSCQ | æ— ç•Œæ‰©å±• |
| ç¯å½¢ç¼“å†²åŒºï¼ˆå›ºå®šå¤§å°ï¼‰ | SCQ | æœ€é«˜æ€§èƒ½ |
| å¯¹è±¡æ±  | SCQP | ç›´æ¥å­˜å‚¨æŒ‡é’ˆ |
| ç´¢å¼•é˜Ÿåˆ— | SCQ | å†…å­˜æ•ˆç‡é«˜ |

---

## åŸºç¡€ç”¨æ³•

### ç¤ºä¾‹1: ç®€å•ä»»åŠ¡é˜Ÿåˆ—

```cpp
#include "lscq/lscq.hpp"
#include <thread>
#include <iostream>

struct Task {
    int id;
    std::string name;
};

int main() {
    lscq::LSCQ<Task> task_queue;

    // ç”Ÿäº§è€…çº¿ç¨‹
    std::thread producer([&]() {
        for (int i = 0; i < 100; ++i) {
            Task* task = new Task{i, "Task " + std::to_string(i)};
            task_queue.enqueue(task);
            std::cout << "Produced: " << task->name << "\n";
        }
    });

    // æ¶ˆè´¹è€…çº¿ç¨‹
    std::thread consumer([&]() {
        for (int i = 0; i < 100; ++i) {
            Task* task = task_queue.dequeue();
            while (task == nullptr) {
                task = task_queue.dequeue();
                std::this_thread::yield();  // é˜Ÿåˆ—ç©ºï¼Œè®©å‡ºCPU
            }
            std::cout << "Consumed: " << task->name << "\n";
            delete task;
        }
    });

    producer.join();
    consumer.join();

    return 0;
}
```

### ç¤ºä¾‹2: å¤šç”Ÿäº§è€…å¤šæ¶ˆè´¹è€…

```cpp
#include "lscq/scq.hpp"
#include <thread>
#include <vector>

int main() {
    lscq::SCQ<uint64_t> queue;

    constexpr int NUM_PRODUCERS = 4;
    constexpr int NUM_CONSUMERS = 4;
    constexpr int ITEMS_PER_PRODUCER = 1000;

    std::vector<std::thread> threads;

    // å¯åŠ¨ç”Ÿäº§è€…
    for (int i = 0; i < NUM_PRODUCERS; ++i) {
        threads.emplace_back([&, i]() {
            for (int j = 0; j < ITEMS_PER_PRODUCER; ++j) {
                queue.enqueue(i * ITEMS_PER_PRODUCER + j);
            }
        });
    }

    // å¯åŠ¨æ¶ˆè´¹è€…
    std::atomic<int> total_consumed{0};
    for (int i = 0; i < NUM_CONSUMERS; ++i) {
        threads.emplace_back([&]() {
            while (total_consumed.load() < NUM_PRODUCERS * ITEMS_PER_PRODUCER) {
                uint64_t value = queue.dequeue();
                if (value != lscq::SCQ<uint64_t>::EMPTY_VALUE) {
                    total_consumed.fetch_add(1);
                }
            }
        });
    }

    for (auto& t : threads) {
        t.join();
    }

    return 0;
}
```

---

## é«˜çº§ç‰¹æ€§

### 1. CAS2ç¡¬ä»¶æ£€æµ‹

```cpp
#include "lscq/cas2.hpp"

if (lscq::has_cas2_support()) {
    std::cout << "CAS2 hardware support available\n";
} else {
    std::cout << "Using fallback implementation\n";
}
```

### 2. è‡ªå®šä¹‰é…ç½®

```cpp
// ä¿®æ”¹é»˜è®¤é˜Ÿåˆ—å¤§å°
namespace lscq::config {
    constexpr size_t DEFAULT_SCQSIZE = 1 << 20;  // 1M elements
}
```

### 3. æ€§èƒ½ç›‘æ§

```cpp
lscq::SCQ<uint64_t> queue;

// è·å–é˜Ÿåˆ—çŠ¶æ€ï¼ˆéç²¾ç¡®ï¼‰
bool is_empty = queue.is_empty();
```

---

## æœ€ä½³å®è·µ

### âœ… æ¨èåšæ³•

1. **é¢„åˆ†é…å¯¹è±¡**ï¼ˆLSCQ/SCQPï¼‰
   ```cpp
   // å¥½ï¼šé¢„åˆ†é…
   std::vector<Task> task_pool(1000);
   for (auto& task : task_pool) {
       queue.enqueue(&task);
   }
   ```

2. **ä½¿ç”¨å¯¹è±¡æ± **é¿å…é¢‘ç¹new/delete
   ```cpp
   // ä½¿ç”¨å¯¹è±¡æ± 
   ObjectPool<Task> pool;
   queue.enqueue(pool.allocate());
   ```

3. **é˜Ÿåˆ—ç©ºæ—¶è®©å‡ºCPU**
   ```cpp
   while (true) {
       auto* item = queue.dequeue();
       if (item == nullptr) {
           std::this_thread::yield();  // é¿å…ç©ºè½¬
           continue;
       }
       process(item);
   }
   ```

### âŒ é¿å…åšæ³•

1. **ä¸è¦åœ¨é˜Ÿåˆ—æ“ä½œä¸­æŒæœ‰é”**
   ```cpp
   // é”™è¯¯ï¼šæ­»é”é£é™©
   std::lock_guard<std::mutex> lock(mutex_);
   queue.enqueue(item);  // å¯èƒ½é•¿æ—¶é—´é˜»å¡
   ```

2. **ä¸è¦å‡è®¾FIFOä¸¥æ ¼é¡ºåº**
   ```cpp
   // è­¦å‘Šï¼šå¹¶å‘ç¯å¢ƒä¸‹FIFOæ˜¯æ¦‚ç‡æ€§çš„
   queue.enqueue(1);
   queue.enqueue(2);
   // dequeueå¯èƒ½å…ˆå¾—åˆ°2ï¼ˆå¦‚æœæœ‰å¹¶å‘æ“ä½œï¼‰
   ```

---

## æ€§èƒ½è°ƒä¼˜

### 1. ç¼–è¯‘å™¨ä¼˜åŒ–

```cmake
# CMakeLists.txt
set(CMAKE_CXX_FLAGS_RELEASE "-O3 -march=native -flto")
```

### 2. CPUäº²å’Œæ€§ï¼ˆå¯é€‰ï¼‰

```cpp
#include <pthread.h>

// ç»‘å®šçº¿ç¨‹åˆ°ç‰¹å®šCPUæ ¸å¿ƒ
void pin_to_core(int core_id) {
    cpu_set_t cpuset;
    CPU_ZERO(&cpuset);
    CPU_SET(core_id, &cpuset);
    pthread_setaffinity_np(pthread_self(), sizeof(cpu_set_t), &cpuset);
}

std::thread producer([&]() {
    pin_to_core(0);  // ç»‘å®šåˆ°æ ¸å¿ƒ0
    // ç”Ÿäº§é€»è¾‘...
});
```

### 3. é¢„å¡«å……é˜Ÿåˆ—ï¼ˆå‡å°‘ç©ºé˜Ÿåˆ—ï¼‰

```cpp
lscq::SCQ<uint64_t> queue;

// é¢„å¡«å……ï¼Œå‡å°‘ç©ºé˜Ÿåˆ—ç‡
for (int i = 0; i < 1000; ++i) {
    queue.enqueue(i);
}
```

### 4. æ‰¹é‡æ“ä½œï¼ˆå‡å°‘åŸå­æ“ä½œï¼‰

```cpp
// å¥½ï¼šæ‰¹é‡å…¥é˜Ÿ
std::vector<int> batch(100);
for (auto& item : batch) {
    queue.enqueue(item);
}

// è€Œä¸æ˜¯ï¼š
for (int i = 0; i < 100; ++i) {
    queue.enqueue(i);  // æ¯æ¬¡éƒ½æœ‰åŸå­æ“ä½œå¼€é”€
}
```

---

## æ•…éšœæ’æŸ¥

å‚è§ [Troubleshooting.md](Troubleshooting.md)

---

## ä¸‹ä¸€æ­¥

- é˜…è¯» [APIæ–‡æ¡£](https://yourname.github.io/lscq-cpp/)
- æŸ¥çœ‹ [æ€§èƒ½æŠ¥å‘Š](Phase7-æ€§èƒ½æŠ¥å‘Š.md)
- å°è¯• [ç¤ºä¾‹ä»£ç ](../examples/)
```

**éªŒæ”¶ç‚¹**: æ•™ç¨‹æ¸…æ™°ã€ç¤ºä¾‹å¯è¿è¡Œã€è¦†ç›–å¸¸è§åœºæ™¯

---

### 4.3 APIæ–‡æ¡£è¡¥å…¨ (Day 5-6)

#### 4.3.1 è¡¥å……Doxygenæ³¨é‡Š

**ä¸ºæ‰€æœ‰å…¬å¼€ç±»å’Œæ–¹æ³•æ·»åŠ Doxygenæ³¨é‡Š**:

```cpp
/// @file scq.hpp
/// @brief Scalable Circular Queue - é«˜æ€§èƒ½æœ‰ç•ŒMPMCé˜Ÿåˆ—
/// @author LSCQ Team
/// @version 1.0.0
/// @date 2026-01-20

namespace lscq {

/// @class SCQ
/// @brief æœ‰ç•Œlock-free MPMCé˜Ÿåˆ—ï¼ŒåŸºäºRing Buffer + Thresholdæœºåˆ¶
///
/// SCQï¼ˆScalable Circular Queueï¼‰æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„æœ‰ç•Œé˜Ÿåˆ—ï¼Œä½¿ç”¨ï¼š
/// - **Ring Buffer**: å¾ªç¯æ•°ç»„å­˜å‚¨
/// - **Thresholdæœºåˆ¶**: é¿å…livelockï¼ˆ3n-1é˜ˆå€¼ï¼‰
/// - **Cache Remap**: å‡å°‘false sharing
/// - **Catchupä¼˜åŒ–**: å¤„ç†dequeue-heavyåœºæ™¯
///
/// @tparam T å…ƒç´ ç±»å‹ï¼ˆé€šå¸¸ä¸ºuint64_tç´¢å¼•ï¼‰
///
/// @par æ€§èƒ½ç‰¹ç‚¹
/// - 16æ ¸è¾¾åˆ° 52+ Mops/sec
/// - æ¯”MSQueueå¿«3å€+
/// - å•çº¿ç¨‹ 8+ Mops/sec
///
/// @par ä½¿ç”¨ç¤ºä¾‹
/// @code
/// lscq::SCQ<uint64_t> queue;
///
/// // ç”Ÿäº§è€…çº¿ç¨‹
/// queue.enqueue(42);
///
/// // æ¶ˆè´¹è€…çº¿ç¨‹
/// uint64_t value = queue.dequeue();
/// if (value != lscq::SCQ<uint64_t>::EMPTY_VALUE) {
///     std::cout << "Got: " << value << "\n";
/// }
/// @endcode
///
/// @note è¦æ±‚CAS2ç¡¬ä»¶æ”¯æŒï¼ˆx86-64 cmpxchg16bæˆ–ARM64 CASPï¼‰
///
/// @see https://github.com/yourname/lscq-cpp
/// @see LSCQ æ— ç•Œé˜Ÿåˆ—ç‰ˆæœ¬
template<typename T = uint64_t>
class SCQ {
public:
    /// @brief é˜Ÿåˆ—å®¹é‡ï¼ˆç¼–è¯‘æ—¶å¸¸é‡ï¼‰
    static constexpr size_t SCQSIZE = config::DEFAULT_SCQSIZE;

    /// @brief ç©ºé˜Ÿåˆ—æ ‡è®°å€¼
    static constexpr T EMPTY_VALUE = static_cast<T>(-1);

    /// @brief Thresholdé˜ˆå€¼ï¼ˆ3n-1ï¼‰
    static constexpr uint64_t THRESHOLD = 3 * SCQSIZE - 1;

    /// @brief æ„é€ å‡½æ•° - åˆå§‹åŒ–ring bufferå’ŒåŸå­å˜é‡
    /// @throws std::bad_alloc å¦‚æœå†…å­˜åˆ†é…å¤±è´¥
    ///
    /// @par æ—¶é—´å¤æ‚åº¦
    /// O(n)ï¼Œnä¸ºSCQSIZE
    SCQ();

    /// @brief ææ„å‡½æ•° - é‡Šæ”¾ring bufferå†…å­˜
    ~SCQ();

    /// @brief ç¦æ­¢æ‹·è´æ„é€ ï¼ˆåŸå­å˜é‡ä¸å¯æ‹·è´ï¼‰
    SCQ(const SCQ&) = delete;

    /// @brief ç¦æ­¢æ‹·è´èµ‹å€¼
    SCQ& operator=(const SCQ&) = delete;

    /// @brief å…¥é˜Ÿæ“ä½œï¼ˆé˜»å¡ç›´åˆ°æˆåŠŸï¼‰
    /// @param index è¦æ’å…¥çš„ç´¢å¼•å€¼
    ///
    /// @par çº¿ç¨‹å®‰å…¨
    /// å®Œå…¨çº¿ç¨‹å®‰å…¨ï¼Œæ”¯æŒå¤šç”Ÿäº§è€…å¹¶å‘
    ///
    /// @par æ€§èƒ½
    /// å•çº¿ç¨‹: ~8 Mops/sec
    /// 16çº¿ç¨‹: ~52 Mops/sec
    ///
    /// @warning é˜Ÿåˆ—æ»¡æ—¶ä¼šé˜»å¡ç­‰å¾…ï¼Œè€ƒè™‘ä½¿ç”¨LSCQæ— ç•Œé˜Ÿåˆ—
    void enqueue(T index);

    /// @brief å‡ºé˜Ÿæ“ä½œ
    /// @return å…ƒç´ å€¼ï¼Œé˜Ÿåˆ—ç©ºæ—¶è¿”å›EMPTY_VALUE
    ///
    /// @par çº¿ç¨‹å®‰å…¨
    /// å®Œå…¨çº¿ç¨‹å®‰å…¨ï¼Œæ”¯æŒå¤šæ¶ˆè´¹è€…å¹¶å‘
    T dequeue();

    /// @brief æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼ˆéç²¾ç¡®ï¼‰
    /// @return trueè¡¨ç¤ºé˜Ÿåˆ—å¯èƒ½ä¸ºç©º
    ///
    /// @warning å¹¶å‘ç¯å¢ƒä¸‹æ­¤æ–¹æ³•ä»…ä¾›å‚è€ƒï¼Œä¸ä¿è¯ç²¾ç¡®æ€§
    bool is_empty() const;

private:
    // ... ç§æœ‰æˆå‘˜å’Œæ–¹æ³•çš„æ³¨é‡Š
};

}  // namespace lscq
```

#### 4.3.2 ç”ŸæˆDoxygenæ–‡æ¡£

**è¿è¡ŒDoxygen**:
```bash
doxygen Doxyfile
```

**å‘å¸ƒåˆ°GitHub Pages**ï¼ˆå¯é€‰ï¼‰:
```bash
# åˆ›å»ºgh-pagesåˆ†æ”¯
git checkout --orphan gh-pages
cp -r html/* .
git add .
git commit -m "Generate API documentation"
git push origin gh-pages
```

**éªŒæ”¶ç‚¹**: Doxygenæ–‡æ¡£è¦†ç›–ç‡100%ï¼Œæ— è­¦å‘Š

---

### 4.4 ç¤ºä¾‹ä»£ç  (Day 7-8)

#### 4.4.1 åˆ›å»ºå¤šä¸ªç¤ºä¾‹å·¥ç¨‹

**`examples/CMakeLists.txt`**:
```cmake
# ç¤ºä¾‹1: ç®€å•ç”¨æ³•
add_executable(simple_usage simple_usage.cpp)
target_link_libraries(simple_usage lscq_impl)

# ç¤ºä¾‹2: ä»»åŠ¡é˜Ÿåˆ—
add_executable(task_queue task_queue.cpp)
target_link_libraries(task_queue lscq_impl)

# ç¤ºä¾‹3: ç”Ÿäº§è€…-æ¶ˆè´¹è€…
add_executable(producer_consumer producer_consumer.cpp)
target_link_libraries(producer_consumer lscq_impl)

# ç¤ºä¾‹4: æ€§èƒ½å¯¹æ¯”Demo
add_executable(benchmark_demo benchmark_demo.cpp)
target_link_libraries(benchmark_demo lscq_impl)
```

**`examples/task_queue.cpp`** (å®Œæ•´ç¤ºä¾‹):
```cpp
/// @file task_queue.cpp
/// @brief ä½¿ç”¨LSCQå®ç°ä»»åŠ¡é˜Ÿåˆ—çš„å®Œæ•´ç¤ºä¾‹

#include "lscq/lscq.hpp"
#include <iostream>
#include <thread>
#include <vector>
#include <chrono>
#include <atomic>

/// @brief ä»»åŠ¡ç»“æ„
struct Task {
    int id;
    std::string description;
    std::chrono::milliseconds duration;

    Task(int i, const std::string& desc, int ms)
        : id(i), description(desc), duration(ms) {}
};

/// @brief ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†å™¨
class TaskQueue {
public:
    TaskQueue(int num_workers) : stop_(false) {
        // å¯åŠ¨å·¥ä½œçº¿ç¨‹
        for (int i = 0; i < num_workers; ++i) {
            workers_.emplace_back(&TaskQueue::worker_loop, this, i);
        }
    }

    ~TaskQueue() {
        stop();
    }

    /// @brief æäº¤ä»»åŠ¡
    void submit(Task* task) {
        queue_.enqueue(task);
        tasks_submitted_.fetch_add(1);
    }

    /// @brief åœæ­¢é˜Ÿåˆ—
    void stop() {
        stop_.store(true);
        for (auto& w : workers_) {
            if (w.joinable()) {
                w.join();
            }
        }
    }

    /// @brief è·å–ç»Ÿè®¡ä¿¡æ¯
    void print_stats() const {
        std::cout << "Tasks submitted: " << tasks_submitted_.load() << "\n";
        std::cout << "Tasks completed: " << tasks_completed_.load() << "\n";
    }

private:
    void worker_loop(int worker_id) {
        std::cout << "Worker " << worker_id << " started\n";

        while (!stop_.load()) {
            Task* task = queue_.dequeue();

            if (task == nullptr) {
                std::this_thread::sleep_for(std::chrono::milliseconds(10));
                continue;
            }

            // æ‰§è¡Œä»»åŠ¡
            std::cout << "[Worker " << worker_id << "] Processing task "
                      << task->id << ": " << task->description << "\n";

            std::this_thread::sleep_for(task->duration);

            tasks_completed_.fetch_add(1);
            delete task;
        }

        std::cout << "Worker " << worker_id << " stopped\n";
    }

    lscq::LSCQ<Task> queue_;
    std::vector<std::thread> workers_;
    std::atomic<bool> stop_;
    std::atomic<int> tasks_submitted_{0};
    std::atomic<int> tasks_completed_{0};
};

int main() {
    std::cout << "=== Task Queue Demo ===\n\n";

    // åˆ›å»ºä»»åŠ¡é˜Ÿåˆ—ï¼ˆ4ä¸ªå·¥ä½œçº¿ç¨‹ï¼‰
    TaskQueue task_queue(4);

    // æäº¤100ä¸ªä»»åŠ¡
    for (int i = 0; i < 100; ++i) {
        Task* task = new Task(
            i,
            "Task " + std::to_string(i),
            std::chrono::milliseconds(10 + (i % 50))
        );
        task_queue.submit(task);
    }

    // ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ
    std::this_thread::sleep_for(std::chrono::seconds(5));

    // åœæ­¢é˜Ÿåˆ—
    task_queue.stop();

    // æ‰“å°ç»Ÿè®¡
    task_queue.print_stats();

    return 0;
}
```

**éªŒæ”¶ç‚¹**: æ‰€æœ‰ç¤ºä¾‹å¯ç¼–è¯‘è¿è¡Œï¼Œæœ‰è¯¦ç»†æ³¨é‡Š

---

### 4.5 æ•…éšœæ’æŸ¥æŒ‡å— (Day 9)

#### 4.5.1 åˆ›å»º `docs/Troubleshooting.md`

```markdown
# LSCQ æ•…éšœæ’æŸ¥æŒ‡å—

æœ¬æŒ‡å—å¸®åŠ©ä½ è§£å†³ä½¿ç”¨LSCQæ—¶é‡åˆ°çš„å¸¸è§é—®é¢˜ã€‚

---

## ç¼–è¯‘é—®é¢˜

### é—®é¢˜1: "CAS2 not supported" ç¼–è¯‘é”™è¯¯

**ç—‡çŠ¶**:
```
error: static_assert failed "SCQP requires CAS2 hardware support"
```

**åŸå› **: ä½ çš„CPUæˆ–ç¼–è¯‘å™¨ä¸æ”¯æŒ128ä½CAS2æŒ‡ä»¤

**è§£å†³æ–¹æ¡ˆ**:
1. ä½¿ç”¨SCQï¼ˆç´¢å¼•é˜Ÿåˆ—ï¼‰ä»£æ›¿SCQP
2. æˆ–è€…ä½¿ç”¨Fallbackæ¨¡å¼ï¼ˆæ€§èƒ½è¾ƒä½ï¼‰

---

### é—®é¢˜2: é“¾æ¥é”™è¯¯ "undefined reference to lscq::SCQ"

**ç—‡çŠ¶**:
```
undefined reference to `lscq::SCQ<unsigned long>::enqueue(unsigned long)'
```

**åŸå› **: ç¼ºå°‘æ¨¡æ¿å®ä¾‹åŒ–æˆ–æœªé“¾æ¥åº“

**è§£å†³æ–¹æ¡ˆ**:
```cmake
# CMakeLists.txtä¸­æ·»åŠ 
target_link_libraries(your_target lscq_impl)
```

---

## è¿è¡Œæ—¶é—®é¢˜

### é—®é¢˜3: Segmentation Fault (Segfault)

**å¯èƒ½åŸå› **:
1. Entryæœªå¯¹é½åˆ°16å­—èŠ‚
2. è®¿é—®å·²é‡Šæ”¾çš„å¯¹è±¡ï¼ˆLSCQ/SCQPï¼‰
3. EBRå›æ”¶äº†ä»åœ¨ä½¿ç”¨çš„èŠ‚ç‚¹

**è°ƒè¯•æ­¥éª¤**:
```bash
# ä½¿ç”¨AddressSanitizer
cmake --preset windows-clang-debug -DLSCQ_ENABLE_SANITIZERS=ON
cmake --build build/debug
./build/debug/tests/lscq_tests
```

---

### é—®é¢˜4: Data Race (ThreadSanitizeræŠ¥é”™)

**ç—‡çŠ¶**:
```
WARNING: ThreadSanitizer: data race
```

**åŸå› **: å¯èƒ½é”™è¯¯ä½¿ç”¨äº†é˜Ÿåˆ—API

**æ£€æŸ¥**:
- æ˜¯å¦åœ¨é˜Ÿåˆ—æ“ä½œå¤–æœ‰å…±äº«å˜é‡è®¿é—®ï¼Ÿ
- æ˜¯å¦æ­£ç¡®ä½¿ç”¨äº†atomicæ“ä½œï¼Ÿ

---

## æ€§èƒ½é—®é¢˜

### é—®é¢˜5: æ€§èƒ½è¿œä½äºé¢„æœŸ

**ç—‡çŠ¶**: Benchmarkæ˜¾ç¤º < 10 Mops/sec

**å¯èƒ½åŸå› **:
1. æœªä½¿ç”¨Releaseç¼–è¯‘
2. æœªå¯ç”¨ä¼˜åŒ–é€‰é¡¹
3. CPUä¸æ”¯æŒCAS2ç¡¬ä»¶
4. æœ‰å…¶ä»–è¿›ç¨‹å¹²æ‰°

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥ç¼–è¯‘é…ç½®
cmake --preset release-performance

# 2. æ£€æŸ¥CAS2æ”¯æŒ
./build/release-perf/tests/test_cas2

# 3. å…³é—­å…¶ä»–è¿›ç¨‹ï¼Œç»‘å®šCPUæ ¸å¿ƒ
```

---

### é—®é¢˜6: å¤šçº¿ç¨‹æ€§èƒ½ä¸ä½³

**ç—‡çŠ¶**: 16çº¿ç¨‹æ€§èƒ½ä½äº8çº¿ç¨‹

**å¯èƒ½åŸå› **:
- False sharingï¼ˆä¼ªå…±äº«ï¼‰
- NUMAæ•ˆåº”
- è¶…çº¿ç¨‹å¹²æ‰°

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¦ç”¨è¶…çº¿ç¨‹æµ‹è¯•
# ä½¿ç”¨CPUäº²å’Œæ€§ç»‘å®š
taskset -c 0-15 ./benchmark
```

---

## å†…å­˜é—®é¢˜

### é—®é¢˜7: å†…å­˜æ³„æ¼ï¼ˆValgrindæŠ¥é”™ï¼‰

**ç—‡çŠ¶**:
```
definitely lost: 1,024 bytes in 1 blocks
```

**åŸå› **: LSCQ/SCQPä¸­çš„å¯¹è±¡æœªæ­£ç¡®é‡Šæ”¾

**æ£€æŸ¥**:
```cpp
// ç¡®ä¿æ‰€æœ‰enqueueçš„å¯¹è±¡æœ€ç»ˆéƒ½è¢«dequeueå¹¶é‡Šæ”¾
Task* task = new Task();
queue.enqueue(task);

// ç¨å...
Task* result = queue.dequeue();
delete result;  // å¿…é¡»é‡Šæ”¾ï¼
```

---

### é—®é¢˜8: EBRå»¶è¿Ÿå›æ”¶å¯¼è‡´å†…å­˜å ç”¨é«˜

**ç—‡çŠ¶**: å†…å­˜å ç”¨æŒç»­å¢é•¿

**åŸå› **: EBRæœºåˆ¶å»¶è¿Ÿå›æ”¶èŠ‚ç‚¹

**è§£å†³æ–¹æ¡ˆ**: æ­£å¸¸ç°è±¡ï¼Œå†…å­˜ä¼šåœ¨epochæ¨è¿›åå›æ”¶ã€‚å¯è°ƒæ•´epochæ¨è¿›é¢‘ç‡ã€‚

---

## ç®—æ³•é—®é¢˜

### é—®é¢˜9: é˜Ÿåˆ—æ»¡æ—¶enqueueé˜»å¡

**ç—‡çŠ¶**: ç”Ÿäº§è€…çº¿ç¨‹å¡ä½

**åŸå› **: SCQ/SCQPæ˜¯æœ‰ç•Œé˜Ÿåˆ—

**è§£å†³æ–¹æ¡ˆ**:
```cpp
// ä½¿ç”¨LSCQæ— ç•Œé˜Ÿåˆ—
lscq::LSCQ<Task> queue;  // è€ŒéSCQP
```

---

### é—®é¢˜10: FIFOé¡ºåºä¸ä¸¥æ ¼

**ç—‡çŠ¶**: dequeueé¡ºåºä¸enqueueä¸ä¸€è‡´

**åŸå› **: å¹¶å‘ç¯å¢ƒä¸‹FIFOæ˜¯æ¦‚ç‡æ€§çš„

**è§£å†³æ–¹æ¡ˆ**: è¿™æ˜¯æ­£å¸¸çš„ã€‚å¦‚æœéœ€è¦ä¸¥æ ¼é¡ºåºï¼Œä½¿ç”¨å•ç”Ÿäº§è€…å•æ¶ˆè´¹è€…é˜Ÿåˆ—ã€‚

---

## è·å–å¸®åŠ©

å¦‚æœä»¥ä¸Šæ–¹æ³•æ— æ³•è§£å†³é—®é¢˜ï¼š

1. **æ£€æŸ¥æ–‡æ¡£**: [Tutorial.md](Tutorial.md)
2. **æœç´¢Issues**: [GitHub Issues](https://github.com/yourname/lscq-cpp/issues)
3. **æäº¤BugæŠ¥å‘Š**: åŒ…å«æœ€å°å¤ç°ç¤ºä¾‹å’Œç¯å¢ƒä¿¡æ¯

---

## è°ƒè¯•æŠ€å·§

### å¯ç”¨è¯¦ç»†æ—¥å¿—

```cpp
#define LSCQ_DEBUG 1
#include "lscq/scq.hpp"
```

### æ‰“å°é˜Ÿåˆ—çŠ¶æ€

```cpp
void debug_queue(lscq::SCQ<uint64_t>& queue) {
    std::cout << "Queue empty: " << queue.is_empty() << "\n";
}
```

### ä½¿ç”¨GDBè°ƒè¯•

```bash
gdb ./your_program
(gdb) break lscq::SCQ::enqueue
(gdb) run
(gdb) print *this
```
```

**éªŒæ”¶ç‚¹**: è¦†ç›–å¸¸è§é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆæ¸…æ™°

---

### 4.6 è´¡çŒ®æŒ‡å—å’ŒLicense (Day 10)

#### 4.6.1 åˆ›å»º `CONTRIBUTING.md`

```markdown
# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢ä½ å¯¹LSCQé¡¹ç›®çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ã€‚

## è´¡çŒ®æ–¹å¼

### ğŸ› æŠ¥å‘ŠBug

1. åœ¨[GitHub Issues](https://github.com/yourname/lscq-cpp/issues)ä¸­æœç´¢æ˜¯å¦å·²å­˜åœ¨
2. å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºæ–°Issue
3. ä½¿ç”¨BugæŠ¥å‘Šæ¨¡æ¿ï¼ŒåŒ…å«ï¼š
   - é—®é¢˜æè¿°
   - å¤ç°æ­¥éª¤
   - é¢„æœŸè¡Œä¸º vs å®é™…è¡Œä¸º
   - ç¯å¢ƒä¿¡æ¯ï¼ˆOSã€ç¼–è¯‘å™¨ã€CPUï¼‰
   - æœ€å°å¤ç°ç¤ºä¾‹ï¼ˆMREï¼‰

### ğŸ’¡ åŠŸèƒ½å»ºè®®

1. åœ¨[GitHub Discussions](https://github.com/yourname/lscq-cpp/discussions)ä¸­è®¨è®º
2. æè¿°é—®é¢˜åœºæ™¯å’ŒæœŸæœ›çš„è§£å†³æ–¹æ¡ˆ
3. è·å¾—ç»´æŠ¤è€…åé¦ˆåï¼Œåˆ›å»ºIssue

### ğŸ”§ æäº¤ä»£ç 

#### å¼€å‘æµç¨‹

1. **Forkä»“åº“**
   ```bash
   # åœ¨GitHubä¸ŠForké¡¹ç›®
   git clone https://github.com/your-username/lscq-cpp.git
   cd lscq-cpp
   ```

2. **åˆ›å»ºåˆ†æ”¯**
   ```bash
   git checkout -b feature/your-feature-name
   # æˆ–
   git checkout -b fix/issue-number-description
   ```

3. **å¼€å‘å’Œæµ‹è¯•**
   ```bash
   # ç¼–è¯‘
   cmake --preset windows-clang-debug
   cmake --build build/debug

   # è¿è¡Œæµ‹è¯•
   ctest --test-dir build/debug

   # è¿è¡ŒSanitizers
   cmake --preset windows-clang-debug -DLSCQ_ENABLE_SANITIZERS=ON
   cmake --build build/debug
   ./build/debug/tests/lscq_tests
   ```

4. **ä»£ç é£æ ¼**
   ```bash
   # æ ¼å¼åŒ–ä»£ç 
   clang-format -i include/**/*.hpp src/**/*.cpp tests/**/*.cpp

   # é™æ€æ£€æŸ¥
   clang-tidy include/**/*.hpp
   ```

5. **æäº¤**
   ```bash
   git add .
   git commit -m "feat: add new feature"
   # æˆ–
   git commit -m "fix: resolve issue #123"
   ```

   **Commit Messageè§„èŒƒ**ï¼ˆConventional Commitsï¼‰:
   - `feat:` æ–°åŠŸèƒ½
   - `fix:` Bugä¿®å¤
   - `docs:` æ–‡æ¡£æ›´æ–°
   - `test:` æµ‹è¯•ç›¸å…³
   - `perf:` æ€§èƒ½ä¼˜åŒ–
   - `refactor:` ä»£ç é‡æ„

6. **æ¨é€å¹¶åˆ›å»ºPR**
   ```bash
   git push origin feature/your-feature-name
   ```
   åœ¨GitHubä¸Šåˆ›å»ºPull Request

#### PRæ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] ä»£ç è¦†ç›–ç‡æ— é™ä½
- [ ] æ— Sanitizeré”™è¯¯
- [ ] ä»£ç ç¬¦åˆclang-format
- [ ] æ·»åŠ äº†å¿…è¦çš„æµ‹è¯•
- [ ] æ›´æ–°äº†æ–‡æ¡£ï¼ˆå¦‚æœéœ€è¦ï¼‰
- [ ] Commit messageç¬¦åˆè§„èŒƒ

### ğŸ“– æ–‡æ¡£è´¡çŒ®

- ä¿®æ­£é”™åˆ«å­—ã€è¯­æ³•é”™è¯¯
- è¡¥å……ç¤ºä¾‹ä»£ç 
- ç¿»è¯‘æ–‡æ¡£ï¼ˆä¸­è‹±äº’è¯‘ï¼‰

---

## ä»£ç è§„èŒƒ

### C++ç¼–ç é£æ ¼

- **å‘½å**:
  - ç±»å: `PascalCase` (ä¾‹å¦‚ `SCQueue`)
  - å‡½æ•°/å˜é‡: `snake_case` (ä¾‹å¦‚ `enqueue`, `head_`)
  - å¸¸é‡: `UPPER_CASE` (ä¾‹å¦‚ `SCQSIZE`)
  - ç§æœ‰æˆå‘˜åç¼€ä¸‹åˆ’çº¿ (ä¾‹å¦‚ `head_`)

- **æ ¼å¼**: ä½¿ç”¨ `.clang-format` é…ç½®

- **æ³¨é‡Š**: ä½¿ç”¨Doxygené£æ ¼

### æµ‹è¯•è¦æ±‚

- æ–°åŠŸèƒ½å¿…é¡»åŒ…å«å•å…ƒæµ‹è¯•
- æµ‹è¯•è¦†ç›–ç‡ > 90%
- åŒ…å«æ­£ç¡®æ€§æµ‹è¯•å’Œå¹¶å‘æµ‹è¯•

### æ€§èƒ½è¦æ±‚

- ä¸å¾—æ˜¾è‘—é™ä½æ€§èƒ½ï¼ˆ< 5%ï¼‰
- æ€§èƒ½ä¼˜åŒ–éœ€æä¾›Benchmarkæ•°æ®

---

## å®¡æ ¸æµç¨‹

1. **è‡ªåŠ¨æ£€æŸ¥**: CIè‡ªåŠ¨è¿è¡Œæµ‹è¯•
2. **ä»£ç å®¡æŸ¥**: è‡³å°‘1ä½ç»´æŠ¤è€…å®¡æŸ¥
3. **è®¨è®ºä¿®æ”¹**: æ ¹æ®åé¦ˆä¿®æ”¹ä»£ç 
4. **åˆå¹¶**: é€šè¿‡ååˆå¹¶åˆ°mainåˆ†æ”¯

---

## ç¤¾åŒºå‡†åˆ™

è¯·éµå®ˆ [CODE_OF_CONDUCT.md](CODE_OF_CONDUCT.md)

---

## è®¸å¯åè®®

è´¡çŒ®çš„ä»£ç å°†é‡‡ç”¨é¡¹ç›®çš„ [MIT License](LICENSE)
```

#### 4.6.2 åˆ›å»º `LICENSE`

```
MIT License

Copyright (c) 2026 [Your Name]

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

#### 4.6.3 åˆ›å»º `CODE_OF_CONDUCT.md`

```markdown
# è¡Œä¸ºå‡†åˆ™

## æˆ‘ä»¬çš„æ‰¿è¯º

ä¸ºäº†è¥é€ å¼€æ”¾å’Œå‹å¥½çš„ç¯å¢ƒï¼Œæˆ‘ä»¬æ‰¿è¯ºè®©å‚ä¸é¡¹ç›®å’Œç¤¾åŒºçš„æ¯ä¸ªäººéƒ½æ‹¥æœ‰æ— éªšæ‰°çš„ä½“éªŒã€‚

## æˆ‘ä»¬çš„æ ‡å‡†

ç§¯æè¡Œä¸ºç¤ºä¾‹ï¼š
- ä½¿ç”¨å‹å¥½å’ŒåŒ…å®¹çš„è¯­è¨€
- å°Šé‡ä¸åŒçš„è§‚ç‚¹å’Œç»éªŒ
- ä¼˜é›…åœ°æ¥å—å»ºè®¾æ€§æ‰¹è¯„
- å…³æ³¨å¯¹ç¤¾åŒºæœ€æœ‰åˆ©çš„äº‹æƒ…
- å¯¹å…¶ä»–ç¤¾åŒºæˆå‘˜è¡¨ç¤ºåŒç†å¿ƒ

ä¸å¯æ¥å—çš„è¡Œä¸ºç¤ºä¾‹ï¼š
- ä½¿ç”¨æ€§åŒ–çš„è¯­è¨€æˆ–å›¾åƒ
- éªšæ‰°æ€§è¯„è®º
- å‘å¸ƒä»–äººçš„ç§äººä¿¡æ¯
- å…¶ä»–ä¸é“å¾·æˆ–ä¸ä¸“ä¸šçš„è¡Œä¸º

## æˆ‘ä»¬çš„è´£ä»»

é¡¹ç›®ç»´æŠ¤è€…æœ‰è´£ä»»æ¾„æ¸…å¯æ¥å—è¡Œä¸ºçš„æ ‡å‡†ï¼Œå¹¶å¯¹ä»»ä½•ä¸å¯æ¥å—çš„è¡Œä¸ºé‡‡å–é€‚å½“å’Œå…¬å¹³çš„çº æ­£æªæ–½ã€‚

## é€‚ç”¨èŒƒå›´

æœ¬è¡Œä¸ºå‡†åˆ™é€‚ç”¨äºæ‰€æœ‰é¡¹ç›®ç©ºé—´ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š
- ä»£ç ä»“åº“
- Issueå’ŒPRè®¨è®º
- ç¤¾åŒºè®ºå›

## æ‰§è¡Œ

å¯å‘ [your.email@example.com] æŠ¥å‘Šæ»¥ç”¨ã€éªšæ‰°æˆ–å…¶ä»–ä¸å¯æ¥å—çš„è¡Œä¸ºã€‚

## å½’å±

æœ¬è¡Œä¸ºå‡†åˆ™æ”¹ç¼–è‡ª [Contributor Covenant](https://www.contributor-covenant.org/), version 2.1ã€‚
```

**éªŒæ”¶ç‚¹**: æ‰€æœ‰æ²»ç†æ–‡æ¡£å®Œæ•´

---

## 5. äº¤ä»˜ç‰©æ¸…å•

### 5.1 æ–‡æ¡£æ–‡ä»¶
- [ ] `README.md` - é¡¹ç›®ä¸»æ–‡æ¡£
- [ ] `docs/Tutorial.md` - ä½¿ç”¨æ•™ç¨‹
- [ ] `docs/Troubleshooting.md` - æ•…éšœæ’æŸ¥
- [ ] `CONTRIBUTING.md` - è´¡çŒ®æŒ‡å—
- [ ] `CODE_OF_CONDUCT.md` - è¡Œä¸ºå‡†åˆ™
- [ ] `LICENSE` - MITè®¸å¯è¯

### 5.2 ç¤ºä¾‹ä»£ç 
- [ ] `examples/simple_usage.cpp`
- [ ] `examples/task_queue.cpp`
- [ ] `examples/producer_consumer.cpp`
- [ ] `examples/benchmark_demo.cpp`

### 5.3 APIæ–‡æ¡£
- [ ] Doxygenç”Ÿæˆçš„HTMLæ–‡æ¡£
- [ ] (å¯é€‰) GitHub Pageså‘å¸ƒ

### 5.4 äº¤æ¥æ–‡æ¡£
- [ ] `docs/Phase8-äº¤æ¥æ–‡æ¡£.md` - **å¿…é¡»åˆ›å»º**

---

## 6. éªŒæ”¶æ ‡å‡† (Gate Conditions)

### 6.1 æ–‡æ¡£è´¨é‡éªŒæ”¶
- âœ… **G1.1**: READMEæ¸…æ™°ã€å®Œæ•´ã€æœ‰å¸å¼•åŠ›
- âœ… **G1.2**: Tutorialè¦†ç›–å¸¸è§åœºæ™¯ï¼Œç¤ºä¾‹å¯è¿è¡Œ
- âœ… **G1.3**: æ•…éšœæ’æŸ¥æŒ‡å—å®ç”¨
- âœ… **G1.4**: æ— è¯­æ³•å’Œæ‹¼å†™é”™è¯¯

### 6.2 ç¤ºä¾‹ä»£ç éªŒæ”¶
- âœ… **G2.1**: æ‰€æœ‰ç¤ºä¾‹å¯ç¼–è¯‘è¿è¡Œ
- âœ… **G2.2**: ç¤ºä¾‹æœ‰è¯¦ç»†æ³¨é‡Š
- âœ… **G2.3**: è‡³å°‘4ä¸ªç¤ºä¾‹è¦†ç›–ä¸åŒåœºæ™¯

### 6.3 APIæ–‡æ¡£éªŒæ”¶
- âœ… **G3.1**: Doxygenè¦†ç›–ç‡100%
- âœ… **G3.2**: æ‰€æœ‰å…¬å¼€APIæœ‰æ³¨é‡Š
- âœ… **G3.3**: ç”Ÿæˆçš„æ–‡æ¡£å¯è®¿é—®

### 6.4 å¼€æºæ²»ç†éªŒæ”¶
- âœ… **G4.1**: LICENSEæ–‡ä»¶å­˜åœ¨
- âœ… **G4.2**: CONTRIBUTING.mdå®Œæ•´
- âœ… **G4.3**: CODE_OF_CONDUCT.mdå­˜åœ¨

---

## 7. é¡¹ç›®å‘å¸ƒå‡†å¤‡

### 7.1 å‘å¸ƒæ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰Phase 1-8å®Œæˆ
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½è¾¾æ ‡
- [ ] æ–‡æ¡£å®Œæ•´
- [ ] Licenseæ­£ç¡®

### 7.2 GitHub Release v1.0.0

**åˆ›å»ºRelease**:
```bash
# æ‰“æ ‡ç­¾
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin v1.0.0

# åœ¨GitHubä¸Šåˆ›å»ºRelease
# æ ‡é¢˜: LSCQ v1.0.0 - Initial Release
# æè¿°: åŒ…å«ç‰¹æ€§åˆ—è¡¨ã€æ€§èƒ½æ•°æ®ã€å®‰è£…æŒ‡å—
```

**Release Notesç¤ºä¾‹**:
```markdown
# LSCQ v1.0.0 - Initial Release

ğŸ‰ é¦–æ¬¡æ­£å¼å‘å¸ƒï¼

## âœ¨ ç‰¹æ€§

- âœ… 4ç§é˜Ÿåˆ—ç±»å‹ï¼ˆNCQ/SCQ/SCQP/LSCQï¼‰
- âœ… 16æ ¸è¾¾åˆ°52+ Mops/sec
- âœ… æ”¯æŒx86-64ã€ARM64ã€PowerPC
- âœ… å®Œæ•´æ–‡æ¡£å’Œç¤ºä¾‹

## ğŸ“Š æ€§èƒ½

- SCQ @ 16 cores: 52.1 Mops/sec (vs MSQueue +189%)
- LSCQ @ 16 cores: 45.8 Mops/sec

## ğŸ“– æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹](README.md)
- [ä½¿ç”¨æ•™ç¨‹](docs/Tutorial.md)
- [APIæ–‡æ¡£](https://yourname.github.io/lscq-cpp/)

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ï¼
```

---

## 8. é˜¶æ®µå®Œæˆäº¤æ¥æ–‡æ¡£è¦æ±‚

åˆ›å»º `docs/Phase8-äº¤æ¥æ–‡æ¡£.md`ï¼ŒåŒ…å«ï¼š

```markdown
# Phase 8 äº¤æ¥æ–‡æ¡£

## 1. å®Œæˆæƒ…å†µæ¦‚è§ˆ
- README: âœ… å®Œæ•´ã€æ¸…æ™°
- Tutorial: âœ… è¦†ç›–å¸¸è§åœºæ™¯
- APIæ–‡æ¡£: âœ… 100%è¦†ç›–
- ç¤ºä¾‹ä»£ç : âœ… 4ä¸ªç¤ºä¾‹
- å¼€æºæ²»ç†: âœ… å®Œæ•´

## 2. æ–‡æ¡£æ¸…å•
| æ–‡æ¡£ç±»å‹ | æ–‡ä»¶å | è¡Œæ•° | çŠ¶æ€ |
|---------|--------|------|------|
| ä¸»æ–‡æ¡£ | README.md | 250 | âœ… |
| æ•™ç¨‹ | docs/Tutorial.md | 500 | âœ… |
| æ•…éšœæ’æŸ¥ | docs/Troubleshooting.md | 300 | âœ… |
| è´¡çŒ®æŒ‡å— | CONTRIBUTING.md | 200 | âœ… |
| è¡Œä¸ºå‡†åˆ™ | CODE_OF_CONDUCT.md | 50 | âœ… |

## 3. ç¤ºä¾‹ä»£ç æ¸…å•
- simple_usage.cpp: åŸºç¡€ç”¨æ³•
- task_queue.cpp: ä»»åŠ¡é˜Ÿåˆ—å®Œæ•´ç¤ºä¾‹
- producer_consumer.cpp: å¤šç”Ÿäº§è€…å¤šæ¶ˆè´¹è€…
- benchmark_demo.cpp: æ€§èƒ½å¯¹æ¯”æ¼”ç¤º

## 4. APIæ–‡æ¡£
- Doxygenè¦†ç›–ç‡: 100%
- GitHub Pages: https://yourname.github.io/lscq-cpp/

## 5. é¡¹ç›®å‘å¸ƒå‡†å¤‡
- âœ… License: MIT
- âœ… ç‰ˆæœ¬: v1.0.0
- âœ… Release Noteså·²å‡†å¤‡
- âœ… GitHub Releaseå¯å‘å¸ƒ

## 6. åç»­ç»´æŠ¤è®¡åˆ’
- Bugä¿®å¤æµç¨‹
- åŠŸèƒ½è¯·æ±‚è¯„å®¡
- ç¤¾åŒºPRå®¡æ ¸
- æ–‡æ¡£æŒç»­æ›´æ–°
```

---

## 9. å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

### Q1: æ–‡æ¡£éœ€è¦ä¸­è‹±æ–‡åŒè¯­å—ï¼Ÿ
**A**: å¯é€‰ã€‚å»ºè®®è‡³å°‘æœ‰è‹±æ–‡ç‰ˆREADMEï¼Œæ–¹ä¾¿å›½é™…ç”¨æˆ·ã€‚

### Q2: APIæ–‡æ¡£éœ€è¦å‘å¸ƒåˆ°å“ªé‡Œï¼Ÿ
**A**: å¯é€‰GitHub Pagesï¼Œæˆ–è€…åŒ…å«åœ¨Releaseé™„ä»¶ä¸­ã€‚

### Q3: ç¤ºä¾‹ä»£ç éœ€è¦å¤šå°‘ä¸ªï¼Ÿ
**A**: è‡³å°‘4ä¸ªï¼Œè¦†ç›–åŸºç¡€ç”¨æ³•ã€ä»»åŠ¡é˜Ÿåˆ—ã€å¤šçº¿ç¨‹ã€æ€§èƒ½å¯¹æ¯”ã€‚

### Q4: å¦‚ä½•å¸å¼•å¼€æºè´¡çŒ®è€…ï¼Ÿ
**A**: æ¸…æ™°çš„æ–‡æ¡£ã€å‹å¥½çš„ç¤¾åŒºã€åŠæ—¶çš„åé¦ˆã€Good First Issueæ ‡ç­¾ã€‚

---

## 10. å‚è€ƒèµ„æ–™

- `docs/Phase7-äº¤æ¥æ–‡æ¡£.md` - æ€§èƒ½æ•°æ®
- [Doxygen Manual](https://www.doxygen.nl/manual/)
- [GitHub README Best Practices](https://github.com/matiassingers/awesome-readme)
- [Contributor Covenant](https://www.contributor-covenant.org/)

---

**StarterPromptç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2026-01-20
**é€‚ç”¨èŒƒå›´**: LSCQé¡¹ç›® Phase 8

---

**ä¸‹åˆ—æ–‡æ¡£å¯èƒ½å¯¹ä½ å¼€å±•å·¥ä½œæœ‰å¸®åŠ©**

Phase 7 äº¤æ¥æ–‡æ¡£: @docs/Phase7-äº¤æ¥æ–‡æ¡£.md
Phase 7 æ€§èƒ½æŠ¥å‘Š: @docs/Phase7-æ€§èƒ½æŠ¥å‘Š.md
